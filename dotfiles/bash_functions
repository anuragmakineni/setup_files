#!bin/bash
# ssh to nanoplus
function overo()
{
    case "$1" in
        "13")
            IP=162
            ;;
        "14")
            IP=163
            ;;
        "15")
            IP=164
            ;;
        *)
            echo "Not a valid overo"
            return
            ;;
    esac

    ssh "root@192.168.129.$IP"
}

# set ROS_MASTER_URI
function rosmu()
{
    if [ $# -eq 0 ]; then
        echo $ROS_MASTER_URI
    elif [ "$1" == "local" ]; then
        export ROS_MASTER_URI=http://localhost:11311
    elif [ "$1" = "overo" ]; then
        case "$2" in
            "13")
                IP=162
                ;;
            "14")
                IP=163
                ;;
            "15")
                IP=164
                ;;
            *)
                echo "Not a valid overo"
                return
                ;;
        esac
        export ROS_MASTER_URI=http://192.168.129.$IP/11311
        echo $ROS_MASTER_URI
    fi
}

# rospp manages ROS_PACKAGE_PATH
# Initialize a stack
export ROSPP_STACK=${ROSPP_STACK:=$ROS_PACKAGE_PATH}
ROS_PACKAGE_PATH=$ROSPP_STACK
function rospp()
{
    # no argument
    if [ $# -eq 0 ]; then
        echo -e "$bldylw-- ROS_PACKAGE_PATH$txtrst";
        splitstr $ROS_PACKAGE_PATH;
        return 0;
    fi;

    # help
    if [ $1 = "--help" ] || [ $1 = "-h" ]; then
        echo -e "usage: rospp [--help|-h] <command> [<args>]\n";
        echo -e "The most commonly used rospp commands are:";
        echo -e "    push \tPush current directory to ROS_PACKAGE_PATH";
        echo -e "    pop  \tPop top directory from ROS_PACKAGE_PATH";
        echo -e "    reset\tReset ROS_PACKAGE_PATH";
        echo -e "    add  \tAdd directory to ROS_PACKAGE_PATH";
        echo -e "    rm   \tRemove path from ROS_PACKAGE_PATH";
        echo -e "    disp \tDisplay all ROS_PACKAGE_PATH";
        return 0;
    fi;

    if [ $1 == "push" ]; then
        if [ $# -eq 1 ]; then
            export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:$(pwd)
        elif [ $# -eq 2 ]; then
            export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:$2
        fi
        splitstr $ROS_PACKAGE_PATH
    fi
}

# split string with : as delimeter
function splitstr()
{
    strlist=${1//:/ }  # this will replace all : with a space
    i=0
    for str in $strlist ; do
        ((i++))
        echo -e "$bldgrn$i: ${str}$txtrst"
    done
}
